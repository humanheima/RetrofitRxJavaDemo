### OkHttp的优势

* HTTP/2支持请求同一个host的多个请求共享一个socket连接。
* 连接缓存降低请求延迟。
* 透明的GZIP压缩下载体积。
* 响应缓存，避免完全重复的request发起网络请求，可以直接从缓存里面获取响应。

当OkHttp遇到网络问题的时候，它会静默的从常见的连接问题中恢复。如果你的服务有多个IP地址，当第一次连接失败的时候，OkHttp会尝试其他的地址。

使用OkHttp很简单。它的request/response API都是使用构建模式创建，并且是不可变的。OkHttp支持同步和异步请求。


### OkHttp的基本工作原理

OkHttp是一个高效的HTTP客户端，它的工作原理主要包括以下几个步骤：

1. **创建请求**：首先，你需要创建一个`Request`对象，这个对象包含了你要访问的URL，请求方法（GET，POST等），请求头和请求体（如果有的话）。

2. **创建Call对象**：然后，你需要使用`OkHttpClient`对象的`newCall`方法，传入你刚刚创建的`Request`对象，这个方法会返回一个`Call`对象。这个`Call`对象代表了一个即将执行的HTTP请求。

3. **执行请求**：你可以选择同步执行请求（使用`Call`对象的`execute`方法）或者异步执行请求（使用`Call`对象的`enqueue`方法）。同步执行会阻塞当前线程直到请求完成，而异步执行则不会。

4. **处理响应**：无论你选择同步执行还是异步执行，你都会得到一个`Response`对象。这个对象包含了服务器的响应，包括响应码，响应头和响应体。

在这个过程中，OkHttp使用了一种叫做拦截器的机制来处理请求和响应。拦截器可以在请求被发送到服务器之前，或者响应被返回到客户端之前，对请求或响应进行修改。例如，你可以添加一个拦截器来添加一个特定的请求头，或者对服务器的响应进行缓存。

在你的代码中，`RealCall.java`文件就是OkHttp的核心部分之一，它实现了`Call`接口，负责创建和执行HTTP请求。在`getResponseWithInterceptorChain`方法中，你可以看到OkHttp是如何创建一个拦截器链，并使用这个链来处理请求和响应的。


